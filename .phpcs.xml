<?xml version="1.0"?>
<ruleset name="WP Cupón WhatsApp">
    <description>Estándares de codificación para WP Cupón WhatsApp Plugin</description>

    <!-- Incluir estándares de WordPress -->
    <rule ref="WordPress-Core">
        <!-- Permitir arrays con espacios para mejor legibilidad -->
        <exclude name="Generic.WhiteSpace.DisallowSpaceIndent"/>
    </rule>
    <rule ref="WordPress-Docs"/>
    <rule ref="WordPress-Extra">
        <!-- Excluir reglas que pueden ser demasiado estrictas -->
        <exclude name="WordPress.Files.FileName.InvalidClassFileName"/>
        <exclude name="WordPress.Files.FileName.NotHyphenatedLowercase"/>
    </rule>

    <!-- Configuraciones específicas -->
    <config name="minimum_supported_wp_version" value="5.0"/>
    <config name="testVersion" value="7.4-"/>

    <!-- Archivos y directorios a verificar -->
    <file>.</file>

    <!-- Excluir directorios y archivos específicos -->
    <exclude-pattern>*/node_modules/*</exclude-pattern>
    <exclude-pattern>*/vendor/*</exclude-pattern>
    <exclude-pattern>*/languages/*</exclude-pattern>
    <exclude-pattern>*/wp-admin/*</exclude-pattern>
    <exclude-pattern>*/.git/*</exclude-pattern>
    <exclude-pattern>*/debug-*</exclude-pattern>
    <exclude-pattern>*/test-*</exclude-pattern>
    <exclude-pattern>*/syntax-*</exclude-pattern>
    <exclude-pattern>*/diagnostico-*</exclude-pattern>
    <exclude-pattern>*/activation-*</exclude-pattern>
    <exclude-pattern>*/isolated-*</exclude-pattern>
    <exclude-pattern>*/quick-*</exclude-pattern>
    <exclude-pattern>*/simple-*</exclude-pattern>
    <exclude-pattern>*/verify-*</exclude-pattern>
    <exclude-pattern>*.bat</exclude-pattern>
    <exclude-pattern>*.ps1</exclude-pattern>
    <exclude-pattern>*.sh</exclude-pattern>
    <exclude-pattern>*.md</exclude-pattern>
    <exclude-pattern>*.txt</exclude-pattern>
    <exclude-pattern>*.html</exclude-pattern>
    <exclude-pattern>*.json</exclude-pattern>

    <!-- Configuraciones de formato -->
    <arg name="colors"/>
    <arg name="parallel" value="8"/>
    <arg value="p"/>

    <!-- Mostrar progreso -->
    <arg value="s"/>

    <!-- Configuraciones específicas para el proyecto -->
    <rule ref="WordPress.WP.I18n">
        <properties>
            <property name="text_domain" type="array">
                <element value="wp-cupon-whatsapp"/>
            </property>
        </properties>
    </rule>

    <!-- Permitir algunas excepciones para compatibilidad -->
    <rule ref="WordPress.Security.EscapeOutput">
        <properties>
            <property name="customAutoEscapedFunctions" type="array">
                <element value="wp_kses_post"/>
                <element value="wp_kses_allowed_html"/>
            </property>
        </properties>
    </rule>

    <!-- Configurar longitud máxima de línea -->
    <rule ref="Generic.Files.LineLength">
        <properties>
            <property name="lineLimit" value="120"/>
            <property name="absoluteLineLimit" value="150"/>
        </properties>
    </rule>

    <!-- Permitir algunas funciones específicas de WordPress -->
    <rule ref="WordPress.Security.NonceVerification">
        <exclude-pattern>*/includes/ajax-handlers.php</exclude-pattern>
    </rule>

    <!-- Configurar indentación -->
    <rule ref="Generic.WhiteSpace.ScopeIndent">
        <properties>
            <property name="indent" value="4"/>
            <property name="tabIndent" value="false"/>
        </properties>
    </rule>
</ruleset>